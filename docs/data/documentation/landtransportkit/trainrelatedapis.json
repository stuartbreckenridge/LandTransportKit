{"abstract":[{"text":"Access MRT\/LRT service alerts and station crowd density data.","type":"text"}],"topicSections":[{"identifiers":["doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainServiceAlert","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/RealTimeDensity","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/ForecastDensity","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainLines"],"anchor":"Models","title":"Models"}],"seeAlsoSections":[{"identifiers":["doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainServiceAlert","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/RealTimeDensity","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/ForecastDensity","doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainLines"],"anchor":"Train","generated":true,"title":"Train"}],"variants":[{"paths":["\/documentation\/landtransportkit\/trainrelatedapis"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/LandTransportKit\/documentation\/LandTransportKit"]]},"sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainRelatedAPIs"},"kind":"article","primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","text":"Overview","type":"heading","level":2},{"inlineContent":[{"type":"text","text":"LandTransportKit provides train-related data through three APIs:"}],"type":"paragraph"},{"header":"row","rows":[[[{"inlineContent":[{"type":"text","text":"API"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Method"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Description"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Service Alerts"}],"type":"paragraph"}],[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadTrainServiceAlerts()","type":"reference"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Current service disruptions"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Real-Time Density"}],"type":"paragraph"}],[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadRealTimeDensity(for:)","type":"reference"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Current station crowd levels"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Forecast Density"}],"type":"paragraph"}],[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadForecastDensity(for:)","type":"reference"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Predicted crowd levels"}],"type":"paragraph"}]]],"type":"table"},{"anchor":"Train-Lines","text":"Train Lines","type":"heading","level":2},{"inlineContent":[{"type":"text","text":"Singaporeâ€™s rail network consists of multiple MRT and LRT lines. Use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainLines"},{"type":"text","text":" enum to specify which line to query:"}],"type":"paragraph"},{"code":["public enum TrainLines: CaseIterable {","    case ccl    \/\/ Circle Line","    case cel    \/\/ Circle Line Extension","    case cgl    \/\/ Changi Extension","    case dtl    \/\/ Downtown Line","    case ewl    \/\/ East West Line","    case nel    \/\/ North East Line","    case nsl    \/\/ North South Line","    case bpl    \/\/ Bukit Panjang LRT","    case slrt   \/\/ Sengkang LRT","    case plrt   \/\/ Punggol LRT","    case tel    \/\/ Thomson-East Coast Line","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each line provides a code and description:"}]},{"type":"codeListing","code":["let line = TrainLines.dtl","print(line.code)        \/\/ \"DTL\"","print(line.description) \/\/ \"Downtown Line\"","","\/\/ Iterate all lines","for line in TrainLines.allCases {","    print(\"\\(line.code): \\(line.description)\")","}"],"syntax":"swift"},{"level":2,"text":"Train Service Alerts","type":"heading","anchor":"Train-Service-Alerts"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The service alerts API provides information about current MRT\/LRT service disruptions, delays, or changes."}]},{"level":3,"text":"Basic Usage","type":"heading","anchor":"Basic-Usage"},{"type":"codeListing","code":["import LandTransportKit","","let alert = try await LandTransportAPI.shared.downloadTrainServiceAlerts()","","\/\/ Check overall service status","switch alert.Status {","case 1:","    print(\"All services operating normally\")","case 2:","    print(\"Service disruption in progress\")","default:","    print(\"Unknown status\")","}"],"syntax":"swift"},{"level":3,"text":"Alert Details","type":"heading","anchor":"Alert-Details"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"isActive":true,"type":"reference","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainServiceAlert"},{"type":"text","text":" contains detailed information about any active disruptions:"}]},{"type":"codeListing","code":["let alert = try await LandTransportAPI.shared.downloadTrainServiceAlerts()","","\/\/ Check if there are any affected segments","if let affectedSegments = alert.AffectedSegments {","    for segment in affectedSegments {","        print(\"Line: \\(segment.Line)\")","        print(\"Direction: \\(segment.Direction)\")","        print(\"Stations: \\(segment.Stations)\")","        print(\"Free Bus: \\(segment.FreeBusAvailable ? \"Yes\" : \"No\")\")","        print(\"Free MRT Shuttle: \\(segment.FreeMRTShuttleAvailable ? \"Yes\" : \"No\")\")","    }","}","","\/\/ Get any messages","if let messages = alert.Messages {","    for message in messages {","        print(\"[\\(message.CreatedDate)] \\(message.Content)\")","    }","}"],"syntax":"swift"},{"level":3,"text":"Displaying Service Status","type":"heading","anchor":"Displaying-Service-Status"},{"type":"codeListing","code":["import SwiftUI","import LandTransportKit","","struct ServiceStatusView: View {","    @State private var alert: TrainServiceAlert?","    @State private var isLoading = false","    ","    var body: some View {","        List {","            Section {","                HStack {","                    statusIcon","                    VStack(alignment: .leading) {","                        Text(\"MRT\/LRT Status\")","                            .font(.headline)","                        Text(statusText)","                            .foregroundStyle(statusColor)","                    }","                }","            }","            ","            if let messages = alert?.Messages, !messages.isEmpty {","                Section(\"Service Messages\") {","                    ForEach(messages, id: \\.Content) { message in","                        VStack(alignment: .leading, spacing: 4) {","                            Text(message.Content)","                            Text(message.CreatedDate)","                                .font(.caption)","                                .foregroundStyle(.secondary)","                        }","                    }","                }","            }","            ","            if let segments = alert?.AffectedSegments, !segments.isEmpty {","                Section(\"Affected Lines\") {","                    ForEach(segments, id: \\.Line) { segment in","                        VStack(alignment: .leading) {","                            Text(segment.Line)","                                .font(.headline)","                            Text(segment.Stations)","                                .font(.subheadline)","                                .foregroundStyle(.secondary)","                        }","                    }","                }","            }","        }","        .refreshable {","            await loadAlert()","        }","        .task {","            await loadAlert()","        }","    }","    ","    private var statusIcon: some View {","        Image(systemName: alert?.Status == 1 ? \"checkmark.circle.fill\" : \"exclamationmark.triangle.fill\")","            .font(.title)","            .foregroundStyle(statusColor)","    }","    ","    private var statusText: String {","        guard let status = alert?.Status else { return \"Loading...\" }","        return status == 1 ? \"Normal Service\" : \"Service Disruption\"","    }","    ","    private var statusColor: Color {","        guard let status = alert?.Status else { return .gray }","        return status == 1 ? .green : .red","    }","    ","    private func loadAlert() async {","        isLoading = true","        defer { isLoading = false }","        ","        do {","            alert = try await LandTransportAPI.shared.downloadTrainServiceAlerts()","        } catch {","            print(\"Error: \\(error)\")","        }","    }","}"],"syntax":"swift"},{"level":2,"text":"Station Crowd Density","type":"heading","anchor":"Station-Crowd-Density"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The crowd density APIs provide real-time and forecasted crowd levels at MRT\/LRT stations. This data helps commuters plan their journeys to avoid crowded stations."}]},{"level":3,"text":"Real-Time Density","type":"heading","anchor":"Real-Time-Density"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Get the current crowd density for all stations on a specific line:"}]},{"type":"codeListing","code":["\/\/ Get real-time density for Downtown Line","let density = try await LandTransportAPI.shared.downloadRealTimeDensity(for: .dtl)","","for station in density {","    print(\"\\(station.Station): \\(station.CrowdLevel)\")","}"],"syntax":"swift"},{"level":3,"text":"Crowd Level Values","type":"heading","anchor":"Crowd-Level-Values"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"code":"CrowdLevel","type":"codeVoice"},{"type":"text","text":" property indicates how crowded a station is:"}]},{"header":"row","type":"table","rows":[[[{"inlineContent":[{"type":"text","text":"Value"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Meaning"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"l"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Low crowd - plenty of space"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"m"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Moderate crowd - some crowding"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"h"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"High crowd - very crowded"}],"type":"paragraph"}]]]},{"type":"codeListing","code":["let density = try await LandTransportAPI.shared.downloadRealTimeDensity(for: .nsl)","","for station in density {","    let emoji = switch station.CrowdLevel {","        case \"l\": \"ðŸŸ¢\"","        case \"m\": \"ðŸŸ¡\"","        case \"h\": \"ðŸ”´\"","        default: \"âšªï¸\"","    }","    print(\"\\(emoji) \\(station.Station)\")","}"],"syntax":"swift"},{"level":3,"text":"Forecast Density","type":"heading","anchor":"Forecast-Density"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Get predicted crowd density for stations on a line:"}]},{"type":"codeListing","code":["let forecast = try await LandTransportAPI.shared.downloadForecastDensity(for: .ewl)","","for station in forecast {","    print(\"Station: \\(station.Station)\")","    print(\"Start Time: \\(station.StartTime)\")","    print(\"End Time: \\(station.EndTime)\")","    print(\"Crowd Level: \\(station.CrowdLevel)\")","}"],"syntax":"swift"},{"level":3,"text":"Complete Station Crowd Example","type":"heading","anchor":"Complete-Station-Crowd-Example"},{"type":"codeListing","code":["import SwiftUI","import LandTransportKit","","struct StationCrowdView: View {","    @State private var selectedLine: TrainLines = .dtl","    @State private var density: [RealTimeDensity] = []","    @State private var isLoading = false","    ","    var body: some View {","        NavigationStack {","            List {","                Section {","                    Picker(\"Line\", selection: $selectedLine) {","                        ForEach(TrainLines.allCases, id: \\.self) { line in","                            Text(line.description)","                                .tag(line)","                        }","                    }","                }","                ","                Section(\"Stations\") {","                    if isLoading {","                        ProgressView()","                    } else if density.isEmpty {","                        Text(\"No data available\")","                            .foregroundStyle(.secondary)","                    } else {","                        ForEach(density, id: \\.Station) { station in","                            HStack {","                                crowdIndicator(station.CrowdLevel)","                                Text(station.Station)","                                Spacer()","                                Text(crowdText(station.CrowdLevel))","                                    .font(.caption)","                                    .foregroundStyle(.secondary)","                            }","                        }","                    }","                }","            }","            .navigationTitle(\"Station Crowds\")","            .onChange(of: selectedLine) {","                Task { await loadDensity() }","            }","            .task {","                await loadDensity()","            }","        }","    }","    ","    private func crowdIndicator(_ level: String) -> some View {","        Circle()","            .fill(crowdColor(level))","            .frame(width: 12, height: 12)","    }","    ","    private func crowdColor(_ level: String) -> Color {","        switch level {","        case \"l\": return .green","        case \"m\": return .yellow","        case \"h\": return .red","        default: return .gray","        }","    }","    ","    private func crowdText(_ level: String) -> String {","        switch level {","        case \"l\": return \"Low\"","        case \"m\": return \"Moderate\"","        case \"h\": return \"High\"","        default: return \"Unknown\"","        }","    }","    ","    private func loadDensity() async {","        isLoading = true","        defer { isLoading = false }","        ","        do {","            density = try await LandTransportAPI.shared.downloadRealTimeDensity(for: selectedLine)","        } catch {","            print(\"Error: \\(error)\")","            density = []","        }","    }","}"],"syntax":"swift"},{"level":2,"text":"Complete Example","type":"heading","anchor":"Complete-Example"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Hereâ€™s a comprehensive train information view combining service alerts and crowd density:"}]},{"type":"codeListing","code":["import SwiftUI","import LandTransportKit","","struct TrainInfoView: View {","    @State private var serviceAlert: TrainServiceAlert?","    @State private var crowdData: [TrainLines: [RealTimeDensity]] = [:]","    @State private var isLoading = false","    ","    var body: some View {","        NavigationStack {","            List {","                \/\/ Service Status Section","                Section {","                    ServiceStatusRow(alert: serviceAlert)","                }","                ","                \/\/ Crowd by Line Section","                ForEach(TrainLines.allCases, id: \\.self) { line in","                    if let stations = crowdData[line], !stations.isEmpty {","                        Section(line.description) {","                            ForEach(stations.prefix(5), id: \\.Station) { station in","                                HStack {","                                    Circle()","                                        .fill(crowdColor(station.CrowdLevel))","                                        .frame(width: 10, height: 10)","                                    Text(station.Station)","                                        .font(.subheadline)","                                }","                            }","                        }","                    }","                }","            }","            .navigationTitle(\"Train Info\")","            .refreshable {","                await loadAllData()","            }","            .task {","                await loadAllData()","            }","        }","    }","    ","    private func crowdColor(_ level: String) -> Color {","        switch level {","        case \"l\": return .green","        case \"m\": return .yellow","        case \"h\": return .red","        default: return .gray","        }","    }","    ","    private func loadAllData() async {","        isLoading = true","        defer { isLoading = false }","        ","        \/\/ Load service alert","        do {","            serviceAlert = try await LandTransportAPI.shared.downloadTrainServiceAlerts()","        } catch {","            print(\"Error loading alerts: \\(error)\")","        }","        ","        \/\/ Load crowd data for major lines","        let majorLines: [TrainLines] = [.nsl, .ewl, .nel, .ccl, .dtl, .tel]","        ","        await withTaskGroup(of: (TrainLines, [RealTimeDensity]).self) { group in","            for line in majorLines {","                group.addTask {","                    do {","                        let density = try await LandTransportAPI.shared.downloadRealTimeDensity(for: line)","                        return (line, density)","                    } catch {","                        return (line, [])","                    }","                }","            }","            ","            for await (line, density) in group {","                crowdData[line] = density","            }","        }","    }","}","","struct ServiceStatusRow: View {","    let alert: TrainServiceAlert?","    ","    var body: some View {","        HStack {","            Image(systemName: alert?.Status == 1 ? \"tram.fill\" : \"exclamationmark.triangle.fill\")","                .foregroundStyle(alert?.Status == 1 ? .green : .red)","            VStack(alignment: .leading) {","                Text(\"MRT\/LRT Service\")","                    .font(.headline)","                Text(alert?.Status == 1 ? \"Normal\" : \"Disruption\")","                    .font(.subheadline)","                    .foregroundStyle(.secondary)","            }","        }","    }","}"],"syntax":"swift"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"metadata":{"modules":[{"name":"LandTransportKit"}],"role":"collectionGroup","roleHeading":"API Collection","color":{"standardColorIdentifier":"purple"},"title":"Train Related APIs"},"references":{"LTK-Red.png":{"variants":[{"url":"\/images\/LandTransportKit\/LTK-Red.png","traits":["1x","light"]}],"type":"image","identifier":"LTK-Red.png","alt":null},"doc://LandTransportKit/documentation/LandTransportKit/LandTransportAPI/downloadForecastDensity(for:)":{"role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadForecastDensity(for:)","abstract":[{"type":"text","text":"Downloads the forecast crowd density data for a specific train or LRT line."}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"downloadForecastDensity","kind":"identifier"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"TrainLines","kind":"typeIdentifier","preciseIdentifier":"s:16LandTransportKit10TrainLinesO"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> [","kind":"text"},{"text":"ForecastDensity","kind":"typeIdentifier","preciseIdentifier":"s:16LandTransportKit15ForecastDensityV"},{"text":"]","kind":"text"}],"title":"downloadForecastDensity(for:)","type":"topic","url":"\/documentation\/landtransportkit\/landtransportapi\/downloadforecastdensity(for:)"},"doc://LandTransportKit/documentation/LandTransportKit/TrainServiceAlert":{"navigatorTitle":[{"text":"TrainServiceAlert","kind":"identifier"}],"kind":"symbol","abstract":[{"type":"text","text":"Represents a train service alert with detailed information about affected segments and messages."}],"type":"topic","title":"TrainServiceAlert","url":"\/documentation\/landtransportkit\/trainservicealert","role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainServiceAlert","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TrainServiceAlert","kind":"identifier"}]},"doc://LandTransportKit/documentation/LandTransportKit/ForecastDensity":{"navigatorTitle":[{"text":"ForecastDensity","kind":"identifier"}],"kind":"symbol","abstract":[{"text":"A structure representing forecasted crowd density information for a group of stations on a specific date.","type":"text"}],"url":"\/documentation\/landtransportkit\/forecastdensity","type":"topic","title":"ForecastDensity","role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/ForecastDensity","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ForecastDensity","kind":"identifier"}]},"doc://LandTransportKit/documentation/LandTransportKit/LandTransportAPI/downloadTrainServiceAlerts()":{"type":"topic","abstract":[{"text":"Downloads the latest train service alerts from the Land Transport API.","type":"text"}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"downloadTrainServiceAlerts","kind":"identifier"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"TrainServiceAlert","preciseIdentifier":"s:16LandTransportKit17TrainServiceAlertV","kind":"typeIdentifier"}],"url":"\/documentation\/landtransportkit\/landtransportapi\/downloadtrainservicealerts()","title":"downloadTrainServiceAlerts()","role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadTrainServiceAlerts()"},"doc://LandTransportKit/documentation/LandTransportKit/TrainLines":{"kind":"symbol","type":"topic","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/TrainLines","role":"symbol","title":"TrainLines","url":"\/documentation\/landtransportkit\/trainlines","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"TrainLines"}],"navigatorTitle":[{"text":"TrainLines","kind":"identifier"}],"abstract":[{"type":"codeVoice","code":"TrainLines"},{"text":" is an enumeration representing the various train and LRT lines.","type":"text"}]},"doc://LandTransportKit/documentation/LandTransportKit/RealTimeDensity":{"type":"topic","navigatorTitle":[{"text":"RealTimeDensity","kind":"identifier"}],"abstract":[{"text":"A structure representing real-time crowd density information for a station.","type":"text"}],"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RealTimeDensity","kind":"identifier"}],"url":"\/documentation\/landtransportkit\/realtimedensity","title":"RealTimeDensity","role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/RealTimeDensity"},"doc://LandTransportKit/documentation/LandTransportKit":{"abstract":[{"type":"text","text":"A Swift package for accessing real-time and static data from Singaporeâ€™s Land Transport Authority (LTA) DataMall API."}],"type":"topic","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit","url":"\/documentation\/landtransportkit","kind":"symbol","role":"collection","title":"LandTransportKit","images":[{"identifier":"LTK-Red.png","type":"icon"}]},"doc://LandTransportKit/documentation/LandTransportKit/LandTransportAPI/downloadRealTimeDensity(for:)":{"role":"symbol","identifier":"doc:\/\/LandTransportKit\/documentation\/LandTransportKit\/LandTransportAPI\/downloadRealTimeDensity(for:)","abstract":[{"type":"text","text":"Downloads the real-time crowd density data for a specific train or LRT line."}],"kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"downloadRealTimeDensity","kind":"identifier"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"TrainLines","kind":"typeIdentifier","preciseIdentifier":"s:16LandTransportKit10TrainLinesO"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> [","kind":"text"},{"text":"RealTimeDensity","kind":"typeIdentifier","preciseIdentifier":"s:16LandTransportKit15RealTimeDensityV"},{"text":"]","kind":"text"}],"title":"downloadRealTimeDensity(for:)","type":"topic","url":"\/documentation\/landtransportkit\/landtransportapi\/downloadrealtimedensity(for:)"}}}